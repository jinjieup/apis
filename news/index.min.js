api_url = "https://www.mxnzp.com/api/news/types";
id = api.id;
secret = api.secret;
var code = "";

window.onload = function () {
  $.ajax({
    url: saying_url,
    success: function (result) {
      $("#saying").text(result);
    },
  });
  list_show();
};

function list_show() {
  $.ajax({
    type: "GET",
    url: api_url,
    data: {
      app_id: id,
      app_secret: secret,
    },
    dataType: "json",
    success: function (e) {
      if (e.msg == "数据返回成功！") {
        code = "";
        console.log("Sort List Load SuccessFully!");
        for (let index = 0; index < e.data.length; index++) {
          code += `<div class="col-sm-4">
          <a href="#subtitle" onclick="news_jump(${e.data[index].typeId})" class="btn btn-primary sort-btn">${e.data[index].typeName}</a>
        </div>`;
        }
        $("#sort_list").html("");
        document.getElementById("sort_list").innerHTML = code;
      } else {
        alert("未知错误！建议检查网络连接后刷新网页！");
        console.log("Unknown Failed!");
      }
    },
  });
}

function news_jump(id) {
  var jump_url = "../list/?id=" + id + "#";
  console.log("jump to news list under id => " + id);
  window.open(jump_url, "_blank");
}
